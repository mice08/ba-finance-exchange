<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="AccountPayable">

    <typeAlias alias="PCAccountPayableData"
               type="com.dianping.ba.finance.prepaidcard.api.datas.PCAccountPayableData"/>
    <resultMap id="pcAccountPayableData" class="PCAccountPayableData">
        <result property="apID" column="APID"/>
        <result property="apPlanDate" column="APPlanDate"/>
        <result property="apAmount" column="APAmount"/>
        <result property="customerGlobalID" column="CustomerGlobalID"/>
        <result property="contractGlobalID" column="ContractGlobalID"/>
        <result property="companyGlobalID" column="CompanyGlobalID"/>
        <result property="dealGroupID" column="DealGroupID"/>
        <result property="dealID" column="DealID"/>
        <result property="shopID" column="ShopID"/>
        <result property="voucherID" column="VoucherID"/>
        <result property="accAPID" column="AccAPID"/>
        <result property="fsPPID" column="FSPPID"/>
        <result property="status" column="Status"/>
        <result property="addType" column="AddType"/>
        <result property="addLoginID" column="AddLoginID"/>
        <result property="addDate" column="AddDate"/>
        <result property="lastUpdateLoginID" column="LastUpdateLoginID"/>
        <result property="lastUpdateDate" column="LastUpdateDate"/>
        <result property="memo" column="Memo"/>
    </resultMap>

    <insert id="insertAccountPayable" parameterClass="map">
        <![CDATA[
        	 insert into PC_AccountPayable
		            (APPlanDate,
		             APAmount,
		             CustomerGlobalID,
		             ContractGlobalID,
		             CompanyGlobalID,
		             DealGroupID,
		             DealID,
		             ShopID,
		             VoucherID,
		             Status,
		             AddType,
		             AddLoginID,
		             AddDate,
		             LastUpdateLoginID,
		             LastUpdateDate,
		             Memo
		             )
			values (#PCAccountPayableData.apPlanDate#,
			        #PCAccountPayableData.apAmount#,
			        #PCAccountPayableData.customerGlobalID#,
			        #PCAccountPayableData.contractGlobalID#,
			        #PCAccountPayableData.companyGlobalID#,
			        #PCAccountPayableData.dealGroupID#,
			        #PCAccountPayableData.dealID#,
			        #PCAccountPayableData.shopID#,
			        #PCAccountPayableData.voucherID#,
			        #PCAccountPayableData.status#,
			        #PCAccountPayableData.addType#,
			        #PCAccountPayableData.addLoginID#,
			        now(),
			        #PCAccountPayableData.lastUpdateLoginID#,
			        now(),
			        #PCAccountPayableData.memo#
			        );
 		]]>
        <selectKey resultClass="java.lang.Integer" keyProperty="APID">
            <![CDATA[
			SELECT @@IDENTITY AS id
		]]>
        </selectKey>
    </insert>

    <update id="updateRelatedAccAPID" parameterClass="map">
        <![CDATA[
        UPDATE PC_AccountPayable
        SET AccAPID = #accAPID#
        WHERE APID = #apID#
 		]]>
    </update>

</sqlMap>